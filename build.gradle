plugins {
    id "net.ltgt.apt" version "0.10"
}

apply plugin: 'java'

version = '3.5.3'
sourceCompatibility = 1.7
targetCompatibility = 1.7

sourceSets {
    main {
        java { srcDirs "src", "ext/rocksaw/src", "ext/vserv-tcpip/src/java" }
        resources { srcDirs "config", "src", "resources" }
    }
    test {
        java { srcDir "test" }
        resources { srcDir "test" }
    }
}

repositories {
    jcenter()
}

dependencies {
    compile 'com.google.dagger:dagger:2.19'
    compile files('lib/swt-linux64.jar')
    compile files('lib/jna.jar')
    apt 'com.google.dagger:dagger-compiler:2.19'
    testCompile 'junit:junit:4.12'
    testCompile 'org.mockito:mockito-core:2.23.0'
}

task fatJar(type: Jar) {
	manifest {
        attributes 'Implementation-Title': 'Angry IP Scanner',
            'Implementation-Version': version,
            'Main-Class': 'net.azib.ipscan.Main',
            'Class-Path': '.',
            'Title': 'Angry IP Scanner',
            'Version': version,
            'URL': 'https://angryip.org/'
    }
    baseName = project.name + '-all'
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}
